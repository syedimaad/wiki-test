[Index Definition:]{.underline}

jsonPUT ugc-challenge-v3 { \"mappings\": { \"properties\": {
\"agg_modified_at\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"audio_id\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"auto_play\": { \"type\": \"boolean\" },
\"background_color_code\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"background_image_url_file_name\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"background_image_url_file_path\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"banner_data\": { \"properties\": {
\"0ffbf9dc-1999-4bc3-b446-c6c7c36fb4ca\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"20c5ed9c-2c54-40e6-82d7-b4d5db2b9bc3\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"38f7e6ab-505c-413f-a8ed-bed581e1bfe9\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"49da252c-46d9-42de-a063-105801f0da52\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"6f7fe0f5-036d-4ec1-864b-ad1a85437eb4\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"9b21dc6e-71f4-4206-8235-64abbd3bef1d\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"9c82bc1d-9ca7-4216-b31e-6955040befc7\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"b1\": { \"properties\": { \"element_cta\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"id\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_name\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_path\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"view_order\": { \"type\": \"long\" } } }, \"b2\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"c461d4f1-cf58-4199-b655-da0caea59a89\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"c4d45956-c8be-4341-8fe9-6466978c6e0e\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"c69a540f-c069-4c54-a62d-6012626eb78a\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"c84584e4-f3e2-4a45-a3e3-8e2b0f5ecf21\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"d4c81fa7-edb2-4e46-82aa-afeb7b4714a9\": { \"properties\": {
\"element_cta\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"id\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"thumbnail_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"view_order\": { \"type\": \"long\" } } },
\"vid\": { \"properties\": { \"element_cta\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"id\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_name\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_path\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"view_order\": { \"type\": \"long\" } } } } }, \"banner_file_name\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"banner_file_path\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"banner_height\": { \"type\": \"long\" }, \"banner_url\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"banner_width\": { \"type\": \"long\" },
\"challenge_id\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"color_code\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"combination_id\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"created_date\": { \"type\": \"date\" },
\"default_banner_id\": { \"type\": \"text\", \"fields\": { \"keyword\":
{ \"type\": \"keyword\", \"ignore_above\": 256 } } }, \"description\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"download_count\": { \"type\": \"long\" },
\"end_date\": { \"type\": \"date\" }, \"fk_downloads\": { \"type\":
\"long\" }, \"fk_likes\": { \"type\": \"long\" }, \"fk_shares\": {
\"type\": \"long\" }, \"fk_views\": { \"type\": \"long\" }, \"hashtag\":
{ \"type\": \"text\", \"fields\": { \"keyword\": { \"type\":
\"keyword\", \"ignore_above\": 256 } }, \"copy_to\": \"search_fields\"
}, \"search_fields\": { \"type\": \"completion\", \"analyzer\":
\"standard\", \"preserve_separators\": true,
\"preserve_position_increments\": true, \"max_input_length\": 50,
\"fields\": { \"autocomplete\": { \"type\": \"completion\",
\"analyzer\": \"stopword_analyzer\", \"preserve_separators\": true,
\"preserve_position_increments\": false, \"max_input_length\": 10 } } },
\"hide_banner\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"hide_stats\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"is_audio_allowed\": { \"type\":
\"boolean\" }, \"is_audio_fixed\": { \"type\": \"boolean\" },
\"is_votable\": { \"type\": \"boolean\" }, \"like_count\": { \"type\":
\"long\" }, \"max_video_duration_ms\": { \"type\": \"long\" },
\"min_video_duration_ms\": { \"type\": \"long\" }, \"modified_date\": {
\"type\": \"date\" }, \"mute_on_start\": { \"type\": \"boolean\" },
\"orig_video_id\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"play_count\": {
\"type\": \"long\" }, \"share_count\": { \"type\": \"long\" },
\"sponsored\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"sponsored_text\":
{ \"type\": \"text\", \"fields\": { \"keyword\": { \"type\":
\"keyword\", \"ignore_above\": 256 } } }, \"start_date\": { \"type\":
\"date\", \"format\":
\"strict_date_optional_time\|\|epoch_millis\|\|YYYY-MM-DD\'T\'HH:mm:ssZ\|\|YYYY-MM-DD\'T\'HH:mm:ss\'+\'HH:mm\"
}, \"status\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } },
\"status_bar_color\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"theme\": {
\"properties\": { \"background\": { \"properties\": { \"color_code\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"image_url_file_name\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"image_url_file_path\": { \"type\":
\"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } } } }, \"end_date_ms\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"overlay_image_file_name\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"overlay_image_file_path\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"start_date_ms\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"status_bar_color\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } } } },
\"theme_end_date\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } },
\"theme_start_date\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"type\": {
\"type\": \"text\", \"fields\": { \"keyword\": { \"type\": \"keyword\",
\"ignore_above\": 256 } } }, \"unlike_count\": { \"type\": \"long\" },
\"video\": { \"properties\": { \"auto_play\": { \"type\": \"boolean\" },
\"banner_height\": { \"type\": \"long\" }, \"banner_width\": { \"type\":
\"long\" }, \"id\": { \"type\": \"text\", \"fields\": { \"keyword\": {
\"type\": \"keyword\", \"ignore_above\": 256 } } }, \"mute_on_start\": {
\"type\": \"boolean\" }, \"player_url_file_name\": { \"type\": \"text\",
\"fields\": { \"keyword\": { \"type\": \"keyword\", \"ignore_above\":
256 } } }, \"player_url_file_path\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_name\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } },
\"thumbnail_file_path\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } } } },
\"view_count\": { \"type\": \"long\" }, \"votable_meta\": {
\"properties\": { \"type\": { \"type\": \"text\", \"fields\": {
\"keyword\": { \"type\": \"keyword\", \"ignore_above\": 256 } } } } },
\"votes\": { \"type\": \"long\" } } }, \"settings\": { \"index\": {
\"number_of_shards\": \"5\", \"number_of_replicas\": \"1\",
\"analysis\": { \"analyzer\": { \"stopword_analyzer\": { \"stopwords\":
\[ \"and\", \"the\" \], \"type\": \"standard\" } } } } } }

**[Reindex the data:]{.underline}**

jsonPOST \_reindex { \"source\": { \"index\": \"ugc-challenge-v2\" },
\"dest\": { \"index\": \"ugc-challenge-v3\" } }

**[Sample Get Query:]{.underline}**

GET ugc-challenge-v3/\_search { \"query\": { \"prefix\": {
\"hashtag.keyword\": \"travel\" } }, \"suggest\": { \"suggestestions\":
{ \"prefix\": \"travel\", \"completion\": { \"field\":
\"search_fields\", \"size\" : 7, \"skip_duplicates\" : true, \"fuzzy\":{
\"fuzziness\" : 1 } } } } }
