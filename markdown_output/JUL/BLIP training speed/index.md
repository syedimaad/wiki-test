Hardware: ND96AMSR_A100_V4, 8 GPU, 80GB\
PyTorch DDP\
Task: pretrain, image size 224

+-------------+-------------+-------------+-------------+--------------+
| **Num       | **Num       | **Batch     | **Max       | **Comments** |
| samples per | samples per | size per    | memory**    |              |
| second per  | second (8   | GPU**       |             |              |
| GPU**       | GPU)**      |             |             |              |
+-------------+-------------+-------------+-------------+--------------+
| 43          | 345         | 90          | 37 GB       | baseline,    |
|             |             |             |             | original     |
|             |             |             |             | code         |
+-------------+-------------+-------------+-------------+              |
| 45          | 362         | 180         | 68 GB       |              |
+-------------+-------------+-------------+-------------+--------------+
| 50          | 406         | 90          | 32 GB       | remove       |
|             |             |             |             | generation   |
+-------------+-------------+-------------+-------------+              |
| 52          | 419         | 180         | 58 GB       |              |
+-------------+-------------+-------------+-------------+              |
| 53          | 420         | 200         | 64 GB       |              |
+-------------+-------------+-------------+-------------+--------------+
| 166         | 1330        | 200         | 50 GB       | pytorch amp  |
+-------------+-------------+-------------+-------------+--------------+
|             |             |             |             | remove       |
|             |             |             |             | generation + |
|             |             |             |             | apex amp O1  |
+-------------+-------------+-------------+-------------+--------------+
|             |             |             |             | remove       |
|             |             |             |             | generation + |
|             |             |             |             | apex O2      |
+-------------+-------------+-------------+-------------+--------------+
|             |             |             |             | remove       |
|             |             |             |             | generation + |
|             |             |             |             | apex O3      |
+-------------+-------------+-------------+-------------+--------------+
|             |             |             |             | PyTorch 2.0  |
+-------------+-------------+-------------+-------------+--------------+
|             |             |             |             | image size   |
|             |             |             |             | 128          |
+-------------+-------------+-------------+-------------+--------------+
